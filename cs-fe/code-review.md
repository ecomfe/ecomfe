cs-fe code review 执行手册
=========

要求
----

### 代码细节

代码风格必须遵循如下编码规范：

- [HTML 与 CSS 编码规范](https://github.com/ecomfe/spec/blob/master/html-and-css-code-style.md)
- [JavaScript 编码规范](https://github.com/ecomfe/spec/blob/master/javascript-code-style.md)
- [Less 编码规范](https://github.com/ecomfe/spec/blob/master/less-code-style.md)

除了遵循编码规范，还需符合以下要求：

#### CSS

- 避免随意的`style`内联样式
- 尽量避免 CSS Hack，寻求更合理的样式组织
- class 命名清晰合理，不以样式特征命名
- 尽量使用属性简写

#### JavaScript

- 通过合理的空行，划分逻辑区域
- 对外暴露的函数、方法、属性、变量有注释
- 复杂逻辑有注释
- 注释与代码保持同步
- 命名合理、直观、准确
- 禁止全局变量声明和跨文件引用，防止全局变量逃逸
- 禁止原生对象污染
- 避免硬编码，考虑使用常量
- 避免出现大段的字符串常量（如 HTML 模版、CSS 等）


### 组织划分

#### HTML

- 标签的使用遵循语义化
- 尽量避免HTML标签冗余

#### CSS

- 通过合理的层级组织，减少class数量


#### JavaScript

- 单文件行数不宜过长（建议不超过 500 行），适时通过划分模块，进行文件拆分
- 避免臃肿的函数或方法，保持单一职责
- 避免过多的循环或分支嵌套，不可避免时通过注释说明
- 通过函数、类、模块等形式组织代码复用，严禁代码拷贝
- 有分层思想，合理划分数据处理、业务逻辑处理与 DOM 操作
- 设计api考虑易用性和扩展性，需要兼顾向下兼容
- 避免过度划分与设计

### 优化

#### CSS

- 在渐进增强的原则下尽量使用 CSS3
- 合理使用 CSS 伪类减少冗余标签
- 避免复杂的选择器嵌套

#### JavaScript

- 避免内存泄漏，正确使用闭包
- 正确理解并使用`setTimeout`与`setInterval`，不滥用
- 注意`DOM`操作的性能，考虑`repaint`与`reflow`
- 注意`正则表达式`的性能，考虑回溯问题
- 避免深层作用域引用，适当增加缓存

### 项目结构

- 遵循 [项目目录结构规范](https://github.com/ecomfe/spec/blob/master/directory.md)
- 按业务分类划分目录，目录名称简单明确
- 目录内文件数保持合理（建议不少于 5 个，不多于 50 个），避免深层次目录结构


考核分级
-----

### 1: 优秀

完全符合以下四点，为`1: 优秀`

- 项目结构清晰，逻辑性强，无冗余
- 代码细节无可挑剔
- 代码组织划分充分考虑易用性、维护性、扩展性
- 代码优化考虑周全

### 2: 良好

在`1: 优秀`的基础上，如果出现以下条目的一或多项，为`2: 良好`

- 项目结构清晰，逻辑性强，但出现少部分冗余
- 代码细节几乎无可挑剔，偶见疏忽导致的不规范。（含“禁止”字样的条目不允许破例）

### 3: 一般

完全符合以下四点，但达不到`2: 良好`要求的，为`3: 一般`

- 项目结构清晰，允许偶见并容易调整的不合理
- 代码细节较好，允许偶见的不规范。（含“禁止”字样的条目不允许破例）
- 有组织划分的思路，具有维护性和扩展性
- 有一定的代码优化考虑，业务系统不出现瓶颈

### 4: 欠佳

在`3: 一般`的基础上，如果出现以下条目的一或多项，为`4: 欠佳`

- 项目结构不够清晰，或存在子业务目录划分思路出现逻辑不合理
- 有组织划分的意图，维护性和扩展性上的考虑不够
- 业务系统出现不严重影响使用的瓶颈

### 5: 较差

符合以下条目的任意一点，为`5: 较差`

- 项目结构混乱
- 代码规范性差，多处细节欠佳
- 代码组织划分思路混乱，或无组织划分
- 代码优化无考虑，存在显而易见的瓶颈


提交说明
----

- 项目的文本文件原则上必须使用`UTF-8`编码，如果不是需要给出理由
- 业务项目中，超长的 JavaScript 文件，需要给出不可拆分的理由
- 对 JavaScript 全局变量，需要说明理由
- 不遵循项目目录结构规范的历史项目，需要给出理由和调整成本评估
- 可以提交代码划分时的设计材料，可以包含但不限于思路、设计文档、设计图等
